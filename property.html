<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Property Details - PRATA</title> <!-- Title will be updated by JS -->
    <!-- <link rel="stylesheet" href="globals.css"> If you have this -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/property.css"> <!-- Specific: property.css -->
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>
  <body>
    <header class="main-header">
      <!-- Reusing Header from index.html -->
      <div class="container">
        <a href="index.html" class="header-logo">
          <!-- Ensure image path is correct, using PRATA logo -->
          <img src="images/PRATA logo.png" alt="PRATA Logo" />
        </a>
        <nav class="header-nav">
           <!-- Updated hrefs -->
          <a href="wishlist.html" class="wishlist-icon" aria-label="Wishlist">
            <img src="images/iconamoon-heart-bold.svg" alt="Wishlist" />
          </a>
          <a href="profile.html" class="profile-icon" aria-label="Profile Menu">
            <div class="ellipse"></div> <!-- Consider using icon -->
          </a>
        </nav>
      </div>
    </header>

    <main class="container">
       <!-- NOTE: This page REQUIRES js/property-details.js to function -->
       <!-- It fetches data based on the 'id' parameter in the URL -->
       <!-- and populates the #property-content section. -->

      <!-- Loading/Error Messages -->
      <div id="loading-message" style="text-align: center; padding: 40px; font-size: 1.2em;">Loading property details...</div>
      <div id="error-message" style="text-align: center; padding: 40px; color: red; display: none;">Could not load property details. Please check the URL or try again later.</div>

      <!-- Property details content - Populated by JS -->
      <div id="property-content" style="display: none;">
        <section class="property-details-section">
          <div class="property-main-layout">
            <div class="property-info-column">
              <h1 id="property-title">Property Title</h1> <!-- Populated by JS -->
              <p class="property-location" id="property-location" style="margin-bottom: 15px; font-style: italic;"><i class="fas fa-map-marker-alt"></i> Location</p> <!-- Added location field -->
              <p class="property-description" id="property-description" style="white-space: pre-line;">Property description...</p> <!-- Populated by JS -->
              <div class="property-rent" id="property-rent" style="font-size: 1.5em; font-weight: bold; margin: 15px 0;">NPR 0 /mo</div> <!-- Populated by JS -->
              <div class="property-actions">
                 <!-- Links dynamically set by JS - Added IDs -->
                <a href="booking.html" id="book-now-link" class="btn btn-secondary">Book Now</a>
                <a href="contact.html" id="contact-owner-link" class="btn btn-primary">Contact Owner</a>
              </div>
            </div>
            <div class="property-image-column">
              <!-- Image src and alt dynamically set by JS -->
              <img src="images/placeholder.png" alt="Property Main View" id="property-main-image" />
            </div>
          </div>
        </section>

        <section class="property-features-section">
          <h2 class="section-title">Features & Amenities</h2>
          <!-- Features grid - Initially shows static examples. -->
          <!-- NOTE: js/property-details.js will CLEAR and REPOPULATE this section -->
          <!-- with data fetched from properties.json based on the URL id. -->
          <!-- JavaScript should check property.type and add the correct floor info -->
          <div class="features-grid" id="features-grid">
             <!-- Static examples, useful as a template for the JS. -->
             <!-- These specific items will be replaced by dynamic data. -->
             <div class="feature-item"><i class="fas fa-bed"></i> <span>Example: 2 Beds</span></div>
             <div class="feature-item"><i class="fas fa-bath"></i> <span>Example: 1 Bath</span></div>
             <div class="feature-item"><i class="fas fa-ruler-combined"></i> <span>Example: 850 sq ft</span></div>
             <!-- Example: JS will add 'Floor: X' for Apartments/Flats if data exists -->
             <div class="feature-item"><i class="fas fa-building"></i> <span>Example Floor: 3</span></div>
             <!-- Example: JS will add 'Floors: Y' for Houses/Villas if data exists -->
             <div class="feature-item"><i class="fas fa-layer-group"></i> <span>Example Floors: 2</span></div>
             <div class="feature-item"><i class="fas fa-couch"></i> <span>Example: Furnished</span></div>
             <div class="feature-item"><i class="fas fa-car"></i> <span>Example Parking</span></div>
             <!-- ... other potential static examples ... -->
          </div>
        </section>

        <section class="property-gallery-section">
          <h2 class="section-title">Photo Gallery</h2>
          <!-- Gallery grid dynamically populated by JS -->
          <div class="property-gallery-grid" id="property-gallery-grid">
             <!-- Example structure (JS will create these):
             <div class="gallery-image"> <img src="gallery-image-1.jpg" alt="Gallery image 1"> </div>
             -->
          </div>
        </section>

        <section class="property-map-section">
            <h2 class="section-title">Location on Map</h2>
            <div class="map-container" id="map-container">
              <!-- Map link/image dynamically updated by JS -->
              <a href="#" target="_blank" rel="noopener noreferrer" id="map-link">
                <img src="images/basemap-image-2.png" alt="Location Map (placeholder)" id="map-image" />
              </a>
              <div id="map-interactive" style="height: 400px; width: 100%; background-color: #e0e0e0; display: none;">
                  <!-- Placeholder for interactive map library -->
              </div>
            </div>
        </section>

        <!-- Reviews section remains static or could be loaded dynamically -->
        <section class="property-reviews-section">
            <div class="property-reviews-layout">
              <div class="review-image-container">
                <img src="images/inquiry.png" alt="Happy tenants illustration" />
              </div>
              <div class="reviews-content">
                <h2>Visitors Reviews</h2> <!-- Changed from Vistorss -->
                <p class="section-subtitle">
                  See what visitors have to say. <!-- Changed from Vistorss -->
                </p>
                 <!-- Static reviews, consider making dynamic -->
                <div class="review-cards-container">
                  <article class="review-card">
                     <div class="review-user">
                       <div class="review-avatar"></div> <!-- Placeholder avatar -->
                       <div class="review-user-info"><h4>Ashreen K.</h4></div>
                       <div class="review-rating">
                         <img src="images/image.svg" alt="5 Stars" />
                       </div>
                     </div>
                    <p class="review-text">"Absolutely breathtaking views! A perfect getaway."</p>
                  </article>
                   <article class="review-card">
                     <div class="review-user">
                       <div class="review-avatar"></div>
                       <div class="review-user-info"><h4>Trijan P.</h4></div>
                       <div class="review-rating">
                         <img src="images/image.svg" alt="5 Stars Rating" />
                       </div>
                     </div>
                    <p class="review-text">"The villa exceeded all our expectations. Highly recommended."</p>
                  </article>
                </div>
              </div>
            </div>
          </section>

          <!-- Inquiry section remains static -->
          <section class="property-inquiry-section">
            <div class="property-inquiry-layout">
              <div class="inquiry-info">
                <h2>Have Questions?</h2>
                <p class="section-subtitle">
                  Send us a message using the form.
                </p>
                <p>
                  <strong>Or contact PRATA directly:</strong><br />
                  Email: info@prata.com<br />
                  Phone: +977 98XXXXXXXX
                </p>
              </div>
              <form class="inquiry-form" id="inquiry-form" action="#" method="POST">
                 <input type="hidden" name="property_id" id="inquiry-property-id" value="">
                 <input type="hidden" name="property_title" id="inquiry-property-title" value="">

                <div class="form-group">
                  <label for="inquiry-name">Name</label>
                  <input type="text" id="inquiry-name" name="name" placeholder="Enter your name" required />
                </div>
                <div class="form-group">
                  <label for="inquiry-email">Email</label>
                  <input type="email" id="inquiry-email" name="email" placeholder="Enter your email" required />
                </div>
                <div class="form-group">
                  <label for="inquiry-message">Message</label>
                  <textarea id="inquiry-message" name="message" placeholder="Type your message here" rows="4" required></textarea>
                </div>
                <div class="inquiry-form-actions">
                  <!-- <button type="reset" class="btn btn-reset">Reset Form</button> -->
                  <button type="submit" class="btn btn-primary">Send Inquiry</button>
                </div>
              </form>
            </div>
          </section>
      </div> <!-- End of #property-content -->

    </main>

    <footer class="main-footer">
      <!-- Reusing Footer from index.html -->
      <div class="container">
        <div class="footer-content">
           <!-- Update hrefs -->
          <a href="about.html">About Us</a>
          <a href="terms.html">Terms of Service</a>
          <a href="contact.html">Contact Us</a>
          <a href="help.html">Help Center</a>
          <a href="become-host.html">For Landlords</a>
        </div>
         <div class="footer-social">
             <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
             <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
             <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        </div>
         <div class="footer-copyright">
             © 2024 PRATA Rentals. All rights reserved.
         </div>
      </div>
    </footer>

    <script type="module" src="js/main.js"></script>
    <script src="js/property-details.js"></script>
    <script>
  // Catch general JS errors
  window.onerror = function (message, source, lineno, colno, error) {
    console.error("Global Error Handler:", {
      message,
      source,
      lineno,
      colno,
      error
    });
    const errorMsg = document.getElementById("error-message");
    if (errorMsg) {
      errorMsg.style.display = "block";
    }
  };

  // Catch unhandled promise rejections
  window.addEventListener("unhandledrejection", function (event) {
    console.error("Unhandled Promise Rejection:", event.reason);
    const errorMsg = document.getElementById("error-message");
    if (errorMsg) {
      errorMsg.style.display = "block";
    }
  });
</script>

  </body>
</html>