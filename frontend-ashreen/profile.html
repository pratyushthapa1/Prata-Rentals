<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Profile - PRATA</title>
    <!-- <link rel="stylesheet" href="globals.css"> If you have this -->
    <link rel="stylesheet" href="css/common.css" />
    <!-- Optionally add a profile.css if needed, or use common styles/inline -->
    <!-- <link rel="stylesheet" href="css/profile.css"> -->
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      /* Example: Keep simple profile styles inline or move to profile.css */
      .profile-section {
        background-color: #fff;
        padding: 30px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow);
      }
      .profile-section h2 {
        font-size: 1.5em;
        margin-bottom: 20px;
        color: var(--primary-color);
        border-bottom: 1px solid var(--border-light-color);
        padding-bottom: 10px;
        font-family: var(--font-secondary);
        font-weight: 600;
      }
      .profile-section p {
        margin-bottom: 10px;
        font-size: 0.95rem;
      }
      .profile-section strong {
        color: var(--text-dark);
      }
      .logout-button {
        background-color: var(--error-color);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-weight: 500;
      }
      .logout-button:hover {
        background-color: #c9302c;
      }
    </style>
  </head>
  <body>
    <!-- Reusing Header -->
    <header class="main-header">
      <div class="container">
        <!-- #### MODIFIED LINK #### -->
        <a href="index_afterlogin.html" class="header-logo">
          <!-- Changed href to index_afterlogin.html -->
          <img src="images/PRATA logo.png" alt="PRATA Logo" />
        </a>
        <!-- ####################### -->
        <nav class="header-nav">
          <!-- Keep Wishlist link consistent -->
          <a
            href="wishlist.html"
            class="nav-link wishlist-link"
            aria-label="Wishlist"
          >
            <!-- Use classes for consistency -->
            <i class="fa-regular fa-heart"></i>
            <span class="nav-text">Wishlist</span>
            <span class="wishlist-count-badge" style="display: none">0</span>
            <!-- Add badge placeholder if needed -->
          </a>
          <!-- Keep Profile link pointing to itself or disabled if already on profile -->
          <a
            href="profile.html"
            class="nav-link profile-link active"
            aria-label="Profile Menu"
          >
            <!-- Added 'active' class example -->
            <i class="fa-solid fa-user-circle"></i>
            <!-- Use solid icon if active -->
            <span class="nav-text" id="header-username">Profile</span>
            <!-- JS can update this name -->
          </a>
        </nav>
      </div>
    </header>

    <main class="container">
      <h1 class="section-title alt-title">Your Profile</h1>

      <!-- Login Check Simulation -->
      <div
        id="login-prompt-profile"
        style="
          display: none;
          text-align: center;
          padding: 30px;
          background-color: #fff;
          border-radius: 8px;
          margin-bottom: 30px;
        "
      >
        <p>
          Please
          <a
            href="login.html"
            style="color: var(--primary-color); font-weight: bold"
            >log in</a
          >
          to view your profile.
        </p>
      </div>

      <div id="profile-content" style="display: none">
        <!-- Hide content if not logged in -->
        <section class="profile-section">
          <h2>Account Details</h2>
          <p><strong>Name:</strong> <span id="profile-name">Demo User</span></p>
          <p>
            <strong>Email:</strong>
            <span id="profile-email">demo@example.com</span>
          </p>
          <p>
            <a
              href="#"
              class="btn btn-secondary"
              style="font-size: 0.9em; padding: 5px 10px"
              >Edit Details</a
            >
          </p>
        </section>

        <section class="profile-section">
          <h2>Your Bookings</h2>
          <p>You have no past or upcoming bookings.</p>
          <!-- Changed the 'Find a Rental' link to point to the logged-in index -->
          <p>
            <a
              href="index_afterlogin.html"
              class="btn btn-primary"
              style="font-size: 0.9em; padding: 5px 10px"
              >Find a Rental</a
            >
          </p>
        </section>

        <section class="profile-section">
          <h2>Settings</h2>
          <p>Manage your notification preferences and password.</p>
          <p>
            <a
              href="#"
              class="btn btn-secondary"
              style="font-size: 0.9em; padding: 5px 10px"
              >Change Password</a
            >
          </p>
        </section>

        <section class="profile-section" style="text-align: right">
          <button id="logout-btn" class="logout-button">Log Out</button>
        </section>
      </div>
    </main>

    <!-- Reusing Footer -->
    <footer class="main-footer">
      <!-- Footer content remains the same -->
      <div class="container">
        <div class="footer-grid">
          <div class="footer-col footer-about">
            <img
              src="images/PRATA logo.png"
              alt="PRATA Footer Logo"
              class="footer-logo"
            />
            <p>
              Your trusted platform for finding rental properties in Nepal.
              Simple, secure, and efficient.
            </p>
          </div>
          <div class="footer-col footer-links">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="allproperties.html">All Properties</a></li>
              <li><a href="about.html">About Us</a></li>
              <li><a href="become-host.html">List Your Property</a></li>
              <li><a href="contact.html">Contact Us</a></li>
              <li><a href="help.html">Help Center</a></li>
            </ul>
          </div>
          <div class="footer-col footer-legal">
            <h4>Legal</h4>
            <ul>
              <li><a href="terms.html">Terms of Service</a></li>
              <li><a href="privacy.html">Privacy Policy</a></li>
              <li><a href="cancellation.html">Cancellation Policy</a></li>
            </ul>
          </div>
          <div class="footer-col footer-social">
            <h4>Follow Us</h4>
            <div class="social-icons">
              <a
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Facebook"
                ><i class="fab fa-facebook-f"></i></a
              ><a
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Instagram"
                ><i class="fab fa-instagram"></i></a
              ><a
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Twitter"
                ><i class="fab fa-twitter"></i
              ></a>
            </div>
          </div>
        </div>
        <div class="footer-copyright">
          Â© 2024 PRATA Rentals. All rights reserved. Designed with
          <i class="fa-regular fa-heart" style="color: #e48a8a"></i> for Nepal.
        </div>
      </div>
    </footer>

    <!-- Keep existing script.js if needed -->
    <!-- <script src="script.js"></script> -->

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Login Check ---
        const isLoggedIn = localStorage.getItem("prata_loggedIn") === "true";
        const loginPrompt = document.getElementById("login-prompt-profile");
        const profileContent = document.getElementById("profile-content");
        const logoutBtn = document.getElementById("logout-btn");
        const headerUsernameSpan = document.getElementById("header-username"); // Target header name span

        if (!isLoggedIn) {
          // If not logged in, redirect to login page or show prompt
          if (loginPrompt) loginPrompt.style.display = "block";
          if (profileContent) profileContent.style.display = "none";
          // Optional: Redirect immediately if profile should never be seen logged out
          // window.location.href = 'login.html';
        } else {
          // Logged In - Show content, hide prompt, load data
          if (loginPrompt) loginPrompt.style.display = "none";
          if (profileContent) profileContent.style.display = "block";

          // Load user info
          const userEmail = localStorage.getItem("prata_userEmail") || "N/A";
          const userName = localStorage.getItem("prata_userName") || "User";
          document.getElementById("profile-email").textContent = userEmail;
          document.getElementById("profile-name").textContent = userName;

          // Update header username as well
          if (headerUsernameSpan) {
            headerUsernameSpan.textContent = userName;
          }

          // Logout functionality
          if (logoutBtn) {
            logoutBtn.addEventListener("click", () => {
              localStorage.removeItem("prata_loggedIn");
              localStorage.removeItem("prata_userEmail");
              localStorage.removeItem("prata_userName");
              alert("You have been logged out.");
              // Redirect to the LOGGED OUT homepage after logout
              window.location.href = "index.html"; // Or index_logged_out.html if you prefer
            });
          }
        }
      });
    </script>
  </body>
</html>
