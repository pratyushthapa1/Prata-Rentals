<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - PRATA</title>
    <link rel="stylesheet" href="globals.css" />
    <!-- If you have this -->
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/auth.css" />
    <!-- Specific: auth.css -->
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body class="auth-page">
    <!-- Simple Header for Auth Pages -->
    <header class="main-header" style="position: static">
      <div class="container">
        <a href="index.html" class="header-logo">
          <!-- Link back to main logged-out index -->
          <img src="images/PRATA logo.png" alt="PRATA Logo" />
        </a>
      </div>
    </header>

    <main>
      <div class="auth-container">
        <h1>Login to Your Account</h1>
        <form id="login-form" class="auth-form">
          <div class="form-group">
            <label for="login-email">Email Address</label>
            <input
              type="email"
              id="login-email"
              name="email"
              placeholder="Enter your email"
              required
            />
          </div>

          <div class="form-group">
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: baseline;
                margin-bottom: 6px;
              "
            >
              <label for="login-password" style="margin-bottom: 0"
                >Password</label
              >
              <a href="forgot-email.html" class="form-link forgot-password-link"
                >Forgot password?</a
              >
            </div>
            <input
              type="password"
              id="login-password"
              name="password"
              placeholder="Enter your password"
              required
            />
          </div>

          <button type="submit" class="auth-submit-button">Login</button>
        </form>

        <p class="auth-link">
          Don't have an account? <a href="signup.html">Sign Up</a>
        </p>
      </div>
    </main>

    <footer class="main-footer" style="margin-top: 30px">
      <div class="container">
        <div class="footer-copyright">
          Â© 2024 PRATA Rentals. All rights reserved.
        </div>
      </div>
    </footer>

    <script>
      document.getElementById("login-form").addEventListener("submit", (e) => {
        e.preventDefault();
        const emailInput = document.getElementById("login-email");
        const passwordInput = document.getElementById("login-password");
        const email = emailInput.value;
        const password = passwordInput.value;

        if (!email || !password) {
          alert("Please enter both email and password.");
          return;
        }

        // --- Login Simulation ---
        console.log(`Attempting login for: ${email}`);

        // --- !!! IMPORTANT: REAL APP NEED SERVER CHECK HERE !!! ---
        // This simulation simply assumes any non-empty credentials are valid.
        // You MUST replace this with a check against your backend.

        // Assuming login is successful (after server check)
        localStorage.setItem("prata_loggedIn", "true");
        localStorage.setItem("prata_userEmail", email);
        // Store a username (e.g., from server response or derived from email)
        localStorage.setItem("prata_userName", email.split("@")[0]); // Example: Use part before @

        alert("Login successful! Redirecting...");

        // --- MODIFIED REDIRECTION ---
        // Redirect to the logged-in homepage instead of profile
        window.location.href = "index_afterlogin.html"; // Changed from profile.html
        // --- END MODIFICATION ---

        // --- End Simulation ---
      });
    </script>
  </body>
</html>
